version: "3.9"
services:
  iped:
    image: iped-cuda:4.2.2_7
    privileged: true
    ulimits:
      nproc:
        soft: -1
        hard: -1
    command: >
      java -jar iped.jar -Xmx30G --portable --nogui
      __EVIDENCE_PATHS__
      -o "/results/__EVIDENCE_NAME_NOEXT__"
    volumes:
      - "./results:/results"
      - "./ipedtmp:/mnt/ipedtmp"
      __EVIDENCE_PATHS_VOLUMES__
      - "__HASHES_PATH__:/mnt/hashesdb:ro"
      - "__CONF_PATH__:/opt/IPED/iped/conf"
      - "./IPEDConfig.txt:/opt/IPED/iped/IPEDConfig.txt"
      - "./LocalConfig.txt:/opt/IPED/iped/LocalConfig.txt"
      - "./logs:/opt/IPED/iped-4.2.2/log"
      - "/etc/localtime:/etc/localtime:ro"
    devices:
      - "nvidia.com/gpu=all"